(function(_0x6e9e8d,_0x3e304a){const _0x45319e=a0_0x35cf,_0x3e9423=_0x6e9e8d();while(!![]){try{const _0x4b3eee=parseInt(_0x45319e(0x1be))/0x1+-parseInt(_0x45319e(0x18e))/0x2+parseInt(_0x45319e(0x1c8))/0x3+parseInt(_0x45319e(0x1c6))/0x4*(-parseInt(_0x45319e(0x193))/0x5)+parseInt(_0x45319e(0x1c9))/0x6*(-parseInt(_0x45319e(0x1a4))/0x7)+parseInt(_0x45319e(0x181))/0x8+-parseInt(_0x45319e(0x1aa))/0x9*(-parseInt(_0x45319e(0x1bc))/0xa);if(_0x4b3eee===_0x3e304a)break;else _0x3e9423['push'](_0x3e9423['shift']());}catch(_0x1332a9){_0x3e9423['push'](_0x3e9423['shift']());}}}(a0_0x45db,0xa8da8));function a0_0x45db(){const _0x1b9db1=['runtime','toISOString','openSettings','clearSubtitle','.srt,.txt','border-box','fileName','currentTime','1235750uMgSUi','map','1044793rZxNiL','bottom','Error\x20processing\x20subtitle\x20file:','addEventListener','timeupdate','zIndex','className','text','1284trjvvW','textShadow','834717edRHGY','6uxZyCG','split','bilibili-local-subtitle','1px\x201px\x202px\x20#000,\x20-1px\x20-1px\x202px\x20#000','.local-subs-btn','reload','type','name','.bilibili-local-subtitle','onerror','includes','.bstar-player__main\x20video','Error\x20reading\x20file','Error\x20processing\x20stored\x20subtitles:','Failed\x20to\x20parse\x20subtitles','2846952lQbiHa','end','log','push','Subtitles\x20loaded:\x20','center','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22ip-dropdown\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ip-dropdown--placeholder\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22ip-captions-placeholder\x22>CC</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ip-dropdown--wrap\x22\x20style=\x22max-height:\x20384.4px;\x20transform:\x20translateX(-50%);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ip-dropdown--content\x22\x20style=\x22width:\x20auto;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20class=\x22ip-captions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li\x20class=\x22ip-captions--item\x20upload-btn\x22>Upload\x20Subtitles</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','body','right','24px','Subtitles\x20is\x20not\x20an\x20array:','Error\x20parsing\x20SRT\x20file:','Current\x20subtitles\x20will\x20be\x20logged\x20in\x20format:\x20[HH:MM:SS]\x20Subtitle\x20text','1523252mnsXxm','createElement','accept','.settings-btn','.bstar-player__main','11835ssbupF','files','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li\x20class=\x22ip-captions--item\x20settings-btn\x22>Subtitle\x20Settings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','isArray','.upload-btn','target','trim','div','none','style','insertBefore','error','0\x2020px','left','.remove-btn','sendMessage','querySelector','9236283mHFjNr','80px','.player-mobile-control-bar-right','result','getSubtitle','#fff','135BGzSct','textContent','onload','firstChild','readAsText','substr','start','click','subtitles','find'];a0_0x45db=function(){return _0x1b9db1;};return a0_0x45db();}function waitForPlayer(){return new Promise(_0x55d74e=>{const _0x326255=setInterval(()=>{const _0x359eeb=a0_0x35cf,_0x5211e1=document[_0x359eeb(0x1a3)](_0x359eeb(0x17d));_0x5211e1&&(clearInterval(_0x326255),_0x55d74e(_0x5211e1));},0x1f4);});}function parseSRT(_0x36724e){const _0x2e5e01=a0_0x35cf;try{const _0x1d59be=[],_0x3af528=_0x36724e[_0x2e5e01(0x1ca)](/\r?\n/);let _0x4b13f5=null;for(const _0x2cac0f of _0x3af528){if(!_0x2cac0f[_0x2e5e01(0x199)]())_0x4b13f5&&(_0x1d59be[_0x2e5e01(0x184)](_0x4b13f5),_0x4b13f5=null);else{if(!_0x4b13f5)_0x4b13f5={'id':parseInt(_0x2cac0f[_0x2e5e01(0x199)]()),'text':''};else{if(_0x4b13f5[_0x2e5e01(0x1c5)]===''&&_0x2cac0f[_0x2e5e01(0x17c)]('-->')){const [_0x5ca446,_0x18cffd]=_0x2cac0f[_0x2e5e01(0x1ca)]('-->')[_0x2e5e01(0x1bd)](_0x562279=>_0x562279[_0x2e5e01(0x199)]());_0x4b13f5[_0x2e5e01(0x1b0)]=parseTime(_0x5ca446),_0x4b13f5[_0x2e5e01(0x182)]=parseTime(_0x18cffd);}else _0x4b13f5[_0x2e5e01(0x1c5)]+=(_0x4b13f5[_0x2e5e01(0x1c5)]?'\x0a':'')+_0x2cac0f[_0x2e5e01(0x199)]();}}}return _0x4b13f5&&_0x1d59be[_0x2e5e01(0x184)](_0x4b13f5),_0x1d59be;}catch(_0x10f534){return console[_0x2e5e01(0x19e)](_0x2e5e01(0x18c),_0x10f534),null;}}function parseTime(_0x4bf784){const _0x5d2972=a0_0x35cf;try{const [_0x4a50c6,_0x2e105d]=_0x4bf784[_0x5d2972(0x1ca)](','),[_0x319cbc,_0xf0411,_0x25efe8]=_0x4a50c6[_0x5d2972(0x1ca)](':')[_0x5d2972(0x1bd)](Number);return _0x319cbc*0xe10+_0xf0411*0x3c+_0x25efe8+Number(_0x2e105d)/0x3e8;}catch(_0xb13c58){return console[_0x5d2972(0x19e)]('Error\x20parsing\x20time:',_0x4bf784,_0xb13c58),0x0;}}function createSubtitleElement(){const _0x2c6558=a0_0x35cf,_0x2794b7=document[_0x2c6558(0x1a3)](_0x2c6558(0x1d1));if(_0x2794b7)return _0x2794b7;const _0x19e61d=document[_0x2c6558(0x18f)](_0x2c6558(0x19a));_0x19e61d[_0x2c6558(0x1c4)]=_0x2c6558(0x1cb),_0x19e61d[_0x2c6558(0x19c)]['position']='absolute',_0x19e61d[_0x2c6558(0x19c)][_0x2c6558(0x1bf)]=_0x2c6558(0x1a5),_0x19e61d[_0x2c6558(0x19c)][_0x2c6558(0x1a0)]='0',_0x19e61d['style'][_0x2c6558(0x189)]='0',_0x19e61d['style']['textAlign']=_0x2c6558(0x186),_0x19e61d[_0x2c6558(0x19c)][_0x2c6558(0x1c3)]='9999',_0x19e61d['style']['pointerEvents']=_0x2c6558(0x19b),_0x19e61d[_0x2c6558(0x19c)]['color']=_0x2c6558(0x1a9),_0x19e61d[_0x2c6558(0x19c)][_0x2c6558(0x1c7)]=_0x2c6558(0x1cc),_0x19e61d[_0x2c6558(0x19c)]['fontSize']=_0x2c6558(0x18a),_0x19e61d[_0x2c6558(0x19c)]['fontFamily']='sans-serif',_0x19e61d['style']['padding']=_0x2c6558(0x19f),_0x19e61d['style']['boxSizing']=_0x2c6558(0x1b9);const _0x8f802b=document[_0x2c6558(0x1a3)](_0x2c6558(0x192))||document[_0x2c6558(0x188)];return _0x8f802b['appendChild'](_0x19e61d),_0x19e61d;}function formatTime(_0x329b54){const _0x3b3b09=a0_0x35cf,_0x5601bb=new Date(0x0);return _0x5601bb['setSeconds'](_0x329b54),_0x5601bb[_0x3b3b09(0x1b5)]()[_0x3b3b09(0x1af)](0xb,0x8);}function a0_0x35cf(_0x48f688,_0x424077){const _0x45db3a=a0_0x45db();return a0_0x35cf=function(_0x35cfa9,_0x4211de){_0x35cfa9=_0x35cfa9-0x17c;let _0x5a20ea=_0x45db3a[_0x35cfa9];return _0x5a20ea;},a0_0x35cf(_0x48f688,_0x424077);}function updateSubtitle(_0x444909,_0x51f6d6,_0x497aaf){const _0x574aeb=a0_0x35cf;try{const _0x5afbca=_0x444909[_0x574aeb(0x1bb)];if(!Array[_0x574aeb(0x196)](_0x51f6d6)){console[_0x574aeb(0x19e)](_0x574aeb(0x18b),_0x51f6d6),_0x497aaf[_0x574aeb(0x1ab)]='';return;}const _0x5c4e32=_0x51f6d6[_0x574aeb(0x1b3)](_0x211bde=>_0x5afbca>=_0x211bde[_0x574aeb(0x1b0)]&&_0x5afbca<=_0x211bde[_0x574aeb(0x182)]);_0x5c4e32?(_0x497aaf[_0x574aeb(0x1ab)]=_0x5c4e32[_0x574aeb(0x1c5)],console[_0x574aeb(0x183)]('['+formatTime(_0x5afbca)+']\x20'+_0x5c4e32['text'])):_0x497aaf['textContent']='';}catch(_0xce8200){console[_0x574aeb(0x19e)]('Error\x20updating\x20subtitle:',_0xce8200),_0x497aaf['textContent']='';}}function addCaptionsButton(_0x394838,_0x625604){const _0x430a28=a0_0x35cf,_0xabae4c=document[_0x430a28(0x1a3)](_0x430a28(0x1a6));if(!_0xabae4c||document[_0x430a28(0x1a3)](_0x430a28(0x1cd)))return;const _0x26101d=document[_0x430a28(0x18f)](_0x430a28(0x19a));_0x26101d[_0x430a28(0x1c4)]='player-mobile-control-btn\x20player-mobile-right-control-btn\x20local-subs-btn',_0x26101d['innerHTML']=_0x430a28(0x187)+(_0x625604?'<li\x20class=\x22ip-captions--item\x20remove-btn\x22>Remove\x20Subtitles</li>':'')+_0x430a28(0x195),_0xabae4c[_0x430a28(0x19d)](_0x26101d,_0xabae4c[_0x430a28(0x1ad)]),_0x26101d[_0x430a28(0x1a3)](_0x430a28(0x197))?.['addEventListener'](_0x430a28(0x1b1),()=>{const _0x15cd8f=_0x430a28,_0x217ec3=document[_0x15cd8f(0x18f)]('input');_0x217ec3[_0x15cd8f(0x1cf)]='file',_0x217ec3[_0x15cd8f(0x190)]=_0x15cd8f(0x1b8),_0x217ec3['onchange']=_0x20a07d=>{const _0x5f176b=_0x15cd8f,_0x530488=_0x20a07d[_0x5f176b(0x198)][_0x5f176b(0x194)][0x0];if(_0x530488){const _0x4e7714=new FileReader();_0x4e7714[_0x5f176b(0x1ac)]=_0x54028a=>{const _0x27992c=_0x5f176b;try{const _0x386b8c=parseSRT(_0x54028a[_0x27992c(0x198)][_0x27992c(0x1a7)]);_0x386b8c?chrome[_0x27992c(0x1b4)][_0x27992c(0x1a2)]({'action':'saveSubtitle','data':{'subtitles':_0x386b8c,'fileName':_0x530488[_0x27992c(0x1d0)]}},()=>{const _0x262829=_0x27992c;location[_0x262829(0x1ce)]();}):console['error'](_0x27992c(0x180));}catch(_0x4819e1){console['error'](_0x27992c(0x1c0),_0x4819e1);}},_0x4e7714[_0x5f176b(0x1d2)]=()=>{const _0x3a6d30=_0x5f176b;console['error'](_0x3a6d30(0x17e));},_0x4e7714[_0x5f176b(0x1ae)](_0x530488);}},_0x217ec3[_0x15cd8f(0x1b1)]();}),_0x26101d['querySelector'](_0x430a28(0x1a1))?.[_0x430a28(0x1c1)]('click',()=>{const _0x518c62=_0x430a28;chrome[_0x518c62(0x1b4)]['sendMessage']({'action':_0x518c62(0x1b7)},()=>{const _0x31e4f3=_0x518c62;location[_0x31e4f3(0x1ce)]();});}),_0x26101d[_0x430a28(0x1a3)](_0x430a28(0x191))?.['addEventListener']('click',()=>{const _0x143ab7=_0x430a28;chrome[_0x143ab7(0x1b4)][_0x143ab7(0x1a2)]({'action':_0x143ab7(0x1b6)});});}async function main(){const _0x4cdbcd=a0_0x35cf,_0x5c8b94=await waitForPlayer(),_0x3b1f8d=createSubtitleElement();chrome[_0x4cdbcd(0x1b4)][_0x4cdbcd(0x1a2)]({'action':_0x4cdbcd(0x1a8)},_0xd5e520=>{const _0x1a3bca=_0x4cdbcd;if(_0xd5e520&&_0xd5e520[_0x1a3bca(0x1b2)])try{const _0x3a691c=Array['isArray'](_0xd5e520[_0x1a3bca(0x1b2)])?_0xd5e520[_0x1a3bca(0x1b2)]:[],_0x5566bb=_0xd5e520[_0x1a3bca(0x1ba)]||'Unknown';addCaptionsButton(_0x5c8b94,_0x3a691c),console[_0x1a3bca(0x183)](_0x1a3bca(0x185)+_0x5566bb),console[_0x1a3bca(0x183)](_0x1a3bca(0x18d)),_0x5c8b94['addEventListener'](_0x1a3bca(0x1c2),()=>{updateSubtitle(_0x5c8b94,_0x3a691c,_0x3b1f8d);}),updateSubtitle(_0x5c8b94,_0x3a691c,_0x3b1f8d);}catch(_0x4324e7){console[_0x1a3bca(0x19e)](_0x1a3bca(0x17f),_0x4324e7),addCaptionsButton(_0x5c8b94,null);}else addCaptionsButton(_0x5c8b94,null);});}main();